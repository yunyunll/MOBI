// 함수를 통해서 인자를 전달해서 덧셈하는 것
.data

.text
.globl _asm_main

_asm_main:


    stp x29, x30, [sp, #-16]!  // 스택 프레임 생성
    mov x29, sp

    mov w0, #200               // w0 = 200
    mov w1, #100               // w1 = 100

    bl _asm_sum                // _asm_sum 호출

    ldp x29, x30, [sp], #16    // 스택 복원
    ret

_asm_sum:
    add w0, w0, w1      // w0 = w0 + w1
    ret                  // w0가 반환값

    ret






;stp x29, x30, [sp, #-16]!

;SP를 16바이트 감소 → 새 스택 공간 확보

;이전 FP(x29)와 LR(x30)를 스택에 저장 → 나중에 함수 끝날 때 복원 가능

;mov x29, sp

;새로운 프레임 포인터 설정

;현재 스택 위치를 기준으로 로컬 변수나 다른 임시 값 접근 가능

;bl _asm_sum

;x0, x1 값을 인자로 넘기고 함수 호출

;LR(x30)에 _asm_main에서 돌아올 주소 자동 저장

;ldp x29, x30, [sp], #16

;함수 끝나면서 스택에서 이전 FP와 LR 복원

